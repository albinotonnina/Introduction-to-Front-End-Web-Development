<section>
    <h3>4) Run <strong>layout</strong> on the render tree to compute <strong>geometry</strong> of each node</h3>
</section>

<section>
    <h3>4) Run <strong>layout</strong> on the render tree to compute <strong>geometry</strong> of each node</h3>

    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <ul>
                    <li >The browser begins at the root of the render tree and traverses it to compute the geometry of each object on the page.<br>
                        This stage is also known as <strong>reflow</strong>.</li>
                    <li class="fragment fade-in">When the changes affect the document contents or structure, or an element position, a reflow (or relayout) happens.</li>
                    <li class="fragment fade-in">When changing element styles which don't affect the element's position on a page (such as background-color, border-color,
                        visibility), a <strong>repaint</strong> happens.</li>
                    <li class="fragment fade-in">Batch changes, intelligent reflow.</li>
                    <li class="fragment fade-in">Reflow only dirty trees in the tree.</li>
                    <li class="fragment fade-in">Accessing certain properties, e.g. with JS will immediately reflow.</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section>
    <h3>4) Run <strong>layout</strong> on the render tree to compute <strong>geometry</strong> of each node</h3>


    <!--@formatter:off-->
    <pre><code>
    &lt;html>
    &lt;head>
        <title>Layout example</title>
    &lt;/head>
    &lt;body>
        <div style="width: 50%">
            <div style="width: 50%">Hello!</div>
        </div>
    &lt;/body>
    &lt;/html>
    </code></pre>
     <!--@formatter:on-->
</section>


<section>
    <h3>4) Run <strong>layout</strong> on the render tree to compute <strong>geometry</strong> of each node</h3>


    <!--@formatter:off-->
<svg xmlns="http://www.w3.org/2000/svg"  width="1129" height="559" version="1.1"><defs><filter id="dropShadow"><feGaussianBlur in="SourceAlpha" stdDeviation="1.7" result="blur"/><feOffset in="blur" dx="3" dy="3" result="offsetBlur"/><feFlood flood-color="#3D4574" flood-opacity="0.4" result="offsetColor"/><feComposite in="offsetColor" in2="offsetBlur" operator="in" result="offsetBlur"/><feBlend in="SourceGraphic" in2="offsetBlur"/></filter></defs><g transform="translate(0.5,0.5)" filter="url(#dropShadow)"><rect x="1" y="1" width="1120" height="550" fill="#ffffff" stroke="#000000" pointer-events="none"/><ellipse cx="1056" cy="16" rx="10" ry="10" fill="none" stroke="#000000" pointer-events="none"/><ellipse cx="1081" cy="16" rx="10" ry="10" fill="none" stroke="#000000" pointer-events="none"/><ellipse cx="1106" cy="16" rx="10" ry="10" fill="none" stroke="#008cff" pointer-events="none"/><g fill="#666666" font-family="Arial,Helvetica" font-size="17px"/><path d="M 1 31 L 1121 31" fill="none" stroke="#c4c4c4" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(12,9)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="122" height="18" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 17px; font-family: Helvetica; color: rgb(102, 102, 102); line-height: 1.2; vertical-align: top; white-space: nowrap;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Layout Example</div></div></foreignObject><text x="61" y="18" fill="#666666" text-anchor="middle" font-size="17px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><rect x="11" y="111" width="560" height="220" fill="#f68220" stroke="#ffffff" stroke-width="3" pointer-events="none"/><rect x="21" y="121" width="270" height="200" fill="#ffffff" stroke="#f68220" stroke-width="3" pointer-events="none"/><path d="M 593 81 L 843 81 Q 853 81 863 81 L 1106.63 81" fill="none" stroke="#f68220" stroke-miterlimit="10" pointer-events="none"/><path d="M 1111.88 81 L 1104.88 84.5 L 1106.63 81 L 1104.88 77.5 Z" fill="#f68220" stroke="#f68220" stroke-miterlimit="10" pointer-events="none"/><path d="M 19.37 81 L 237.5 81 Q 247.5 81 257.5 81 L 482 81" fill="none" stroke="#f68220" stroke-miterlimit="10" pointer-events="none"/><path d="M 14.12 81 L 21.12 77.5 L 19.37 81 L 21.12 84.5 Z" fill="#f68220" stroke="#f68220" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(513,71)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="51" height="21" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(246, 130, 32); line-height: 1.2; vertical-align: top; overflow: hidden; max-height: 36px; max-width: 106px; width: 52px; white-space: normal; text-align: center;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">100%</div></div></foreignObject><text x="26" y="21" fill="#F68220" text-anchor="middle" font-size="20px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(33,203)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="82" height="36" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 32px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; overflow: hidden; max-height: 46px; max-width: 126px; width: 83px; white-space: normal;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">Hello!</div></div></foreignObject><text x="41" y="34" fill="#000000" text-anchor="middle" font-size="32px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(137,126)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="142" height="21" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; overflow: hidden; max-height: 25px; max-width: 146px; width: 143px; white-space: normal; text-align: right;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div style="text-align: left"><span style="line-height: 1.2"><font color="#353a3e" style="font-size: 20px"><i>div </i>(</font></span><span style="color: rgb(53 , 58 , 62) ; line-height: 1.2">width: 50%)</span></div></div></div></foreignObject><text x="71" y="21" fill="#000000" text-anchor="middle" font-size="20px" font-family="Helvetica">[Not supported by viewer]</text></switch></g><g transform="translate(421,117)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="142" height="21" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 20px; font-family: Helvetica; color: rgb(255, 255, 255); line-height: 1.2; vertical-align: top; overflow: hidden; max-height: 24px; max-width: 165px; width: 144px; white-space: normal; text-align: right;"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;"><div style="text-align: left"><span><i>divÂ </i>(</span><span>width: 50%)</span><br /></div></div></div></foreignObject><text x="71" y="21" fill="#FFFFFF" text-anchor="middle" font-size="20px" font-family="Helvetica">[Not supported by viewer]</text></switch></g></g></svg>
    <!--@formatter:on-->
</section>

<section>
    <h3>Reflow in slow-motion</h3>
    <video width="960" height="720" controls>
        <source src="../lib/video/reflow.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
</section>

<section>
    <h3>Current output</h3>
    <img class="wide" src="../lib/images/rendering_engine_flow/dom.png"/>
</section>



<section>
    <h3>Recap: the rendering engine flow</h3>
    <ol>
        <li class="fragment fade-in"><h3>Process <strong>HTML</strong> markup and build the <strong>DOM</strong> tree</h3></li>
        <li class="fragment fade-in"><h3>Process <strong>CSS</strong> markup and build the <strong>CSSOM</strong> tree</h3></li>
        <li class="fragment fade-in"><h3>Combine the DOM and CSSOM into a <strong>render tree</strong></h3></li>
        <li class="fragment fade-in"><h3>Run <strong>layout</strong> on the render tree to compute <strong>geometry</strong> of each node</h3></li>
        <li class="fragment fade-in"><h3><strong>Paint</strong> the individual nodes to the screen</h3></li>
    </ol>
</section>


